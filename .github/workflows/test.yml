  
name: Test_Artifact_V2
on: [push]
jobs:      
  vm-job:
    runs-on: [ubuntu-latest]
    steps:
    - uses: actions/checkout@v1

    - run: mkdir -p path/to/artifact
    - run: mkdir -p path/to/artifact/oneMore

    - run: echo hello? > path/to/artifact/world.txt
      
    - run: mkdir -p path/to/artifact2
    - run: echo hello2 > path/to/artifact2/world2.txt
    
    - run: mkdir -p path/to/big
    - run: dd if=/dev/urandom of=path/to/big/bigFile.txt bs=64M count=16
    
    - name: 'Upload Big file V1'
      uses: actions/upload-artifact@v1
      with:
        name: 'Big-Artifact-V1'
        path: path/to/big/
        
    - name: 'Upload Big file V2'
      uses: konradpabjan/upload-artifact@konradpabjan/v2-is-almost-here
      with:
        name: 'Big-Artifact-V2'
        path: path/to/big/

    - name: 'Upload an individual file'
      uses: konradpabjan/upload-artifact@konradpabjan/v2-is-almost-here
      with:
        name: 'My-Artifact'
        path: path/to/artifact/world.txt
    
    - name: 'Upload a Directory'
      uses: konradpabjan/upload-artifact@konradpabjan/v2-is-almost-here
      with:
        name: 'My-Artifact2'
        path: path/to/artifact2/
        
    - name: 'Upload using a wildcard pattern'
      uses: konradpabjan/upload-artifact@konradpabjan/v2-is-almost-here
      with:
        path: path/**/[abc]rtifac*/
